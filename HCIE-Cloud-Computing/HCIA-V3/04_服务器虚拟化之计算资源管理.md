FusionCompute是云操作系统软件，负责对虚拟资源，业务资源，用户资源进行管理，采用统一接口，对虚拟资源进行统一调度和管理，从而降低业务运行成本，保证系统安全性和可调度性。

FusionCompute架构(CNA、VRM)
```txt
管理层       WebUI
业务处理
功能模块
数据服务
Connect Service
CNA   VNA
      虚拟计算资源  虚拟存储资源  虚拟网络资源
```
VRM 是FusionCompute系统的管理单元，一般运行在虚拟机上，能够对系统虚拟资源、业务资源、用户资源进行集中管理

集群设置

HA DRS(DPM) 内存复用  NUMA  I/O环  IMC  计算资源调度

DRS动态资源调度 技术特点 1.根据调度策略自动实现集群内虚拟机相对均衡；2.调度算法合理，兼容虚拟机负载变化趋势，避免了虚拟机在主机上来回震荡迁移；3.独有的调度基线设置功能，避免虚拟机无用迁移；4.可针对特殊要求的虚拟机设置例外，不调度或手动调度；5.可按每天，每周，每月时间段精确调度策略。

实现资源按需取用和负载均衡，削峰填谷

分布式电源管理(DPM) 技术特点 系统根据用户设定的DPM策略，将低负载主机上的虚拟机迁移走并对该主机下电，对于负载超过设置阈值的主机，系统智能选择一定数量的主机对其上电，以实现集群内主机整体的负载分担

可智能对1台或者多台主机进行上下电

内存复用 内存复用是指在服务器内存一定的情况下，通过综合运用内存复用单项技术(内存气泡、内存共享、内存交换)对内存进行分时复用。使虚拟机内存规格总和大于服务器规格内存总和，提高服务器中虚拟机密度。

智能内存复用可提升内存资源利用率，帮助用户节省内存采购成本，延长服务器升级内存周期

FusionSphere支持以下内存复用技术
- 内存气泡 系统主动回收虚拟机暂不使用的物理内存，分配给需要复用内存的虚拟机，内存的回收和分配均为系统动态执行，虚拟机上的应用无感知。整个物理服务器上的所有虚拟机使用的分配内存总量不超过该服务器物理内存总量
- 内存交换 将外部存储虚拟成内存给虚拟机用，将虚拟机上暂不使用的数据存放到外部存储上，系统需要使用这些数据时，再与预留在内存上的数据进行交换
- 内存共享 多台虚拟机共享数据内容为零的内存页

支持虚拟机总分配内存超过物理主机实际内存运行，通过虚拟机之间的内存复用，内存共享，内存交换等技术实现物理内存120%的超分配比例

打开内存复用策略后，由内存复用策略接管物理内存分配，在内存不紧张时虚拟机可以使用全部内存，当出现竞争时，由内存复用策略为虚拟机实时调度内存资源，综合运用内存复用技术释放虚拟机空闲内存，为其它虚拟机内存需求提供条件

如果开启了智能网卡的直通模式，则无法启用内存交换功能

每个计算节点上运行的所有虚拟机预留内存之和不能大于虚拟机使用的实际可用物理内存和

NUMA(Non Uniform Memory Access Architecture):将物理服务器的CPU和内存资源分到多个node上，每个node内部可用完全独立工作，node内的内存访问效率最高，如果一台VM的vCPU跨node访问memory的话,必定导致内存访问延迟的增加，NUMA保证了一个VM上vCPU尽量分配到同一个node中的vCPU上

Host NUMA保证VM访问本地内存，减少了内存访问延迟，可以提升VM性能，性能提升的幅度与VM虚拟机访问内存大小和频率相关

I/O环
---

I/O环适配功能主要用来提升大块多队列类型的IO密集型业务的I/O性能。大块(44k以上)，多队列(32队列深度以上)的I/O请求因为分包和I/O环通道较窄导致存储性能无法充分发挥，用户可通过开启I/O环适配功能，提升I/O性能