目录
1. 存储技术介绍
2. OceanStor v3介绍
3. OceanStor Dorado v3介绍

SAN和NAS对比

| 描述 | SAN|NAS|
|:--:|:---|:---|
|适用场景|基于块操作的高I/O要求的应用中，如数据库|适用于非结构化数据(如文件、语音、图片)|
|支持协议|FC iSCSI|NFS FCIFS FTP HTTP|
|数据共享|一般共享|同一文件被多个服务器同时访问|
|组网方式|光纤网|以太网|
|建设成本|主机需要HBA卡，组网需要光纤交换机成本高|通过GE 10GE网络成本低|

OceanStor v3支持SAN与NAS一体化，兼容SAN和NAS两种方式，满足弹性发展简化部署，降低TCO

多路径问题 主机到存储存在多条活动路径；冗余提供了可靠性，但是会导致主机识别磁盘混乱
- 当主机到存储设备有多条链路时，在存储设备上的同一个卷，在主机端呈现多个卷。当存储中一个LUN映射给主机后，由于主机到存储设备的4条虚线链路是独立的，所以主机端将看到4个独立的LUN，这种混乱情况有一个名字：多路径问题
- 在存储设备上的同一个LUN，由于主机到存储设备有多条链路时，在主机上呈现多个磁盘，多路径软件遮蔽这些磁盘，而生成一个虚拟磁盘，读写通过虚拟磁盘进行
- 多路软件功能 1. 最优路径选择 2. 路径I/O负载均衡 自动选择多条路径进行下发，提高I/O性能，以及根据路径繁忙程度进行业务路径选择 3. 故障倒换 业务链路发生故障的时候，故障倒换(Failover)随之发生，实现业务不中断 4. 故障恢复 故障倒换之前的业务链路恢复后，业务恢复(Failback)随之发生，用户无需介入，自动完成，且业务不中断

操作系统自带多路径 window使用的是MPIO linux使用的是DM-Multipath

连接主机和FC交换机 HBA卡
---

- 在SAN中，用高速传输数据的协议是光纤通道(FC)协议，协议最常见的是光纤
- 主机要通过FC协议与阵列的FC主机端口通信，必须要在主机上安装FC HBA卡
- HBA卡有不同供应商，如emulex,brocade和qlogic等

FC分区

- 在实践中，所有设备光纤都是连接到光纤交换机的
- 在交换机内设置zone,可以使用图形界面或者命令行模式，需要输入专用命令去配置zone，一个交换机中，可以同时存在多个zone，这些zone可以是活跃或者不活跃的，多个活跃的zone可以定义一个配置。在交换机中可以存储多个配置(zone config),但是只有一个配置是活跃的
- 在一个交换机中主要有两种方法定义zone 1. 端口分区：在每个zone中，都列出了被连接设备在交换机上的端口号，要求交换机管理员，必须精确指定设备的哪根光纤连接到了交换机哪个端口；2. 软分区：这也叫WWN分区。在一个交换机中，同一个zone中的设备，通过WWN列表来定义一个zone分区，由于WWN标示不好记忆，通常使用别名来标示WWN

FC网络  FC SAN中网络是独立的；可能由多个交换机组成
- 在一个SAN环境中通常至少需要配置两个光纤交换机，这种配置不仅仅是为了满足交换机冗余要求，也是为了满足SAN设计要求。一个FC SAN最优设计必须由两个独立网络组成
- 根据所需SAN基础设施的规模，在入门级的FC光纤交换机和高端核心交换机之间选择光纤交换机的型号
- 入门级交换机和核心交换机之间主要区别在于它们支持的物理端口数目不同，入门级可能有24个端口，核心交换机可能有成百上千个端口
- 当一个交换机没有足够多的端口连接新增设备时，可以替换成一个更多端口的交换机

什么是IP SAN
---
- 以TCP/IP协议为底层传输协议，采用以太网作为承载介质构建起来的存储区域网络架构
- 实现 IP SAN的典型网络协议是iSCSI，它定义了SCSI指令集在IP网络中传输的封装方式

IP SAN就是使用iSCSI协议传输SCSI数据块的SAN网络
- 一个IP SAN是把SCSI块封装到以太网数据包中，然后把它们发送到网上传输
- iSCII方案最早由cisco和IBM发起，由Adaptec cisco HP IBMM Quantum等够公司共同倡导。基于TCP传输，